---
const BASE_URL = import.meta.env.BASE_URL;
const resumePath = `${BASE_URL}Gianvecchio_Resume_2026.pdf`;
---

<div id="resumeLightbox" class="resume-lightbox">
  <div class="resume-lightbox-content">
    <button class="resume-lightbox-close" aria-label="Close resume">&times;</button>
    <div class="resume-lightbox-header">
      <h3>Resume</h3>
      <a href={resumePath} download="Amber_Gianvecchio_Resume.pdf" class="resume-download-btn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Download
      </a>
    </div>
    <div class="resume-viewer">
      <object data={resumePath + '#toolbar=0&navpanes=0&scrollbar=0'} type="application/pdf" title="Resume">
        <p>Unable to display PDF. <a href={resumePath} download="Amber_Gianvecchio_Resume.pdf">Download instead</a></p>
      </object>
    </div>
  </div>
</div>

<script is:inline>
document.addEventListener('DOMContentLoaded', () => {
  const lightbox = document.getElementById('resumeLightbox');
  const closeBtn = lightbox?.querySelector('.resume-lightbox-close');
  const triggers = document.querySelectorAll('[data-resume-trigger]');

  if (!lightbox) return;

  // Open lightbox
  triggers.forEach(trigger => {
    trigger.addEventListener('click', (e) => {
      e.preventDefault();
      lightbox.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    });
  });

  // Close functions
  const closeLightbox = () => {
    lightbox.style.display = 'none';
    document.body.style.overflow = '';
  };

  closeBtn?.addEventListener('click', closeLightbox);

  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) {
      closeLightbox();
    }
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && lightbox.style.display === 'flex') {
      closeLightbox();
    }
  });
});
</script>

<style>
  .resume-lightbox {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }

  .resume-lightbox-content {
    background-color: var(--bg-card);
    border-radius: 12px;
    width: 100%;
    max-width: 900px;
    height: 90vh;
    max-height: 1100px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .resume-lightbox-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 24px;
    border-bottom: 1px solid var(--border);
  }

  .resume-lightbox-header h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
  }

  .resume-lightbox-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.5);
    border: none;
    color: var(--text-primary);
    font-size: 32px;
    cursor: pointer;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color var(--transition-fast);
    line-height: 1;
  }

  .resume-lightbox-close:hover {
    background: rgba(0, 0, 0, 0.7);
  }

  .resume-download-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    background-color: var(--accent);
    color: var(--bg-primary);
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 500;
    transition: opacity var(--transition-fast);
  }

  .resume-download-btn:hover {
    opacity: 0.9;
  }

  .resume-viewer {
    flex: 1;
    overflow: hidden;
  }

  .resume-viewer object {
    width: 100%;
    height: 100%;
    border: none;
    background-color: white;
  }

  .resume-viewer p {
    padding: 40px;
    text-align: center;
    color: var(--text-secondary);
  }

  .resume-viewer p a {
    color: var(--accent);
  }

  @media (max-width: 768px) {
    .resume-lightbox {
      padding: 10px;
    }

    .resume-lightbox-content {
      height: auto;
      max-height: 95vh;
      width: auto;
      max-width: 95vw;
      aspect-ratio: 8.5 / 11;
    }

    .resume-lightbox-header {
      padding: 12px 16px;
      flex-shrink: 0;
    }

    .resume-lightbox-header h3 {
      font-size: 1rem;
    }

    .resume-download-btn {
      padding: 6px 12px;
      font-size: 0.85rem;
    }

    .resume-lightbox-close {
      top: 12px;
      right: 12px;
      width: 36px;
      height: 36px;
      font-size: 24px;
      z-index: 10;
    }
  }
</style>
